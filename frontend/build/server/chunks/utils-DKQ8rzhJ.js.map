{"version":3,"file":"utils-DKQ8rzhJ.js","names":[],"sources":["../../../.svelte-kit/adapter-bun/chunks/exports.js","../../../.svelte-kit/adapter-bun/chunks/utils.js"],"sourcesContent":["const SCHEME = /^[a-z][a-z\\d+\\-.]+:/i;\nconst internal = new URL(\"sveltekit-internal://\");\nfunction resolve(base, path) {\n  if (path[0] === \"/\" && path[1] === \"/\") return path;\n  let url = new URL(base, internal);\n  url = new URL(path, url);\n  return url.protocol === internal.protocol ? url.pathname + url.search + url.hash : url.href;\n}\nfunction normalize_path(path, trailing_slash) {\n  if (path === \"/\" || trailing_slash === \"ignore\") return path;\n  if (trailing_slash === \"never\") {\n    return path.endsWith(\"/\") ? path.slice(0, -1) : path;\n  } else if (trailing_slash === \"always\" && !path.endsWith(\"/\")) {\n    return path + \"/\";\n  }\n  return path;\n}\nfunction decode_pathname(pathname) {\n  return pathname.split(\"%25\").map(decodeURI).join(\"%25\");\n}\nfunction decode_params(params) {\n  for (const key in params) {\n    params[key] = decodeURIComponent(params[key]);\n  }\n  return params;\n}\nfunction make_trackable(url, callback, search_params_callback, allow_hash = false) {\n  const tracked = new URL(url);\n  Object.defineProperty(tracked, \"searchParams\", {\n    value: new Proxy(tracked.searchParams, {\n      get(obj, key) {\n        if (key === \"get\" || key === \"getAll\" || key === \"has\") {\n          return (param) => {\n            search_params_callback(param);\n            return obj[key](param);\n          };\n        }\n        callback();\n        const value = Reflect.get(obj, key);\n        return typeof value === \"function\" ? value.bind(obj) : value;\n      }\n    }),\n    enumerable: true,\n    configurable: true\n  });\n  const tracked_url_properties = [\"href\", \"pathname\", \"search\", \"toString\", \"toJSON\"];\n  if (allow_hash) tracked_url_properties.push(\"hash\");\n  for (const property of tracked_url_properties) {\n    Object.defineProperty(tracked, property, {\n      get() {\n        callback();\n        return url[property];\n      },\n      enumerable: true,\n      configurable: true\n    });\n  }\n  {\n    tracked[Symbol.for(\"nodejs.util.inspect.custom\")] = (depth, opts, inspect) => {\n      return inspect(url, opts);\n    };\n    tracked.searchParams[Symbol.for(\"nodejs.util.inspect.custom\")] = (depth, opts, inspect) => {\n      return inspect(url.searchParams, opts);\n    };\n  }\n  if (!allow_hash) {\n    disable_hash(tracked);\n  }\n  return tracked;\n}\nfunction disable_hash(url) {\n  allow_nodejs_console_log(url);\n  Object.defineProperty(url, \"hash\", {\n    get() {\n      throw new Error(\n        \"Cannot access event.url.hash. Consider using `page.url.hash` inside a component instead\"\n      );\n    }\n  });\n}\nfunction disable_search(url) {\n  allow_nodejs_console_log(url);\n  for (const property of [\"search\", \"searchParams\"]) {\n    Object.defineProperty(url, property, {\n      get() {\n        throw new Error(`Cannot access url.${property} on a page with prerendering enabled`);\n      }\n    });\n  }\n}\nfunction allow_nodejs_console_log(url) {\n  {\n    url[Symbol.for(\"nodejs.util.inspect.custom\")] = (depth, opts, inspect) => {\n      return inspect(new URL(url), opts);\n    };\n  }\n}\nfunction validator(expected) {\n  function validate(module, file) {\n    if (!module) return;\n    for (const key in module) {\n      if (key[0] === \"_\" || expected.has(key)) continue;\n      const values = [...expected.values()];\n      const hint = hint_for_supported_files(key, file?.slice(file.lastIndexOf(\".\"))) ?? `valid exports are ${values.join(\", \")}, or anything with a '_' prefix`;\n      throw new Error(`Invalid export '${key}'${file ? ` in ${file}` : \"\"} (${hint})`);\n    }\n  }\n  return validate;\n}\nfunction hint_for_supported_files(key, ext = \".js\") {\n  const supported_files = [];\n  if (valid_layout_exports.has(key)) {\n    supported_files.push(`+layout${ext}`);\n  }\n  if (valid_page_exports.has(key)) {\n    supported_files.push(`+page${ext}`);\n  }\n  if (valid_layout_server_exports.has(key)) {\n    supported_files.push(`+layout.server${ext}`);\n  }\n  if (valid_page_server_exports.has(key)) {\n    supported_files.push(`+page.server${ext}`);\n  }\n  if (valid_server_exports.has(key)) {\n    supported_files.push(`+server${ext}`);\n  }\n  if (supported_files.length > 0) {\n    return `'${key}' is a valid export in ${supported_files.slice(0, -1).join(\", \")}${supported_files.length > 1 ? \" or \" : \"\"}${supported_files.at(-1)}`;\n  }\n}\nconst valid_layout_exports = /* @__PURE__ */ new Set([\n  \"load\",\n  \"prerender\",\n  \"csr\",\n  \"ssr\",\n  \"trailingSlash\",\n  \"config\"\n]);\nconst valid_page_exports = /* @__PURE__ */ new Set([...valid_layout_exports, \"entries\"]);\nconst valid_layout_server_exports = /* @__PURE__ */ new Set([...valid_layout_exports]);\nconst valid_page_server_exports = /* @__PURE__ */ new Set([...valid_layout_server_exports, \"actions\", \"entries\"]);\nconst valid_server_exports = /* @__PURE__ */ new Set([\n  \"GET\",\n  \"POST\",\n  \"PATCH\",\n  \"PUT\",\n  \"DELETE\",\n  \"OPTIONS\",\n  \"HEAD\",\n  \"fallback\",\n  \"prerender\",\n  \"trailingSlash\",\n  \"config\",\n  \"entries\"\n]);\nconst validate_layout_exports = validator(valid_layout_exports);\nconst validate_page_exports = validator(valid_page_exports);\nconst validate_layout_server_exports = validator(valid_layout_server_exports);\nconst validate_page_server_exports = validator(valid_page_server_exports);\nconst validate_server_exports = validator(valid_server_exports);\nexport {\n  SCHEME as S,\n  decode_params as a,\n  validate_layout_exports as b,\n  validate_page_server_exports as c,\n  disable_search as d,\n  validate_page_exports as e,\n  decode_pathname as f,\n  validate_server_exports as g,\n  make_trackable as m,\n  normalize_path as n,\n  resolve as r,\n  validate_layout_server_exports as v\n};\n","const text_encoder = new TextEncoder();\nconst text_decoder = new TextDecoder();\nfunction get_relative_path(from, to) {\n  const from_parts = from.split(/[/\\\\]/);\n  const to_parts = to.split(/[/\\\\]/);\n  from_parts.pop();\n  while (from_parts[0] === to_parts[0]) {\n    from_parts.shift();\n    to_parts.shift();\n  }\n  let i = from_parts.length;\n  while (i--) from_parts[i] = \"..\";\n  return from_parts.concat(to_parts).join(\"/\");\n}\nfunction base64_encode(bytes) {\n  if (globalThis.Buffer) {\n    return globalThis.Buffer.from(bytes).toString(\"base64\");\n  }\n  let binary = \"\";\n  for (let i = 0; i < bytes.length; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n}\nfunction base64_decode(encoded) {\n  if (globalThis.Buffer) {\n    const buffer = globalThis.Buffer.from(encoded, \"base64\");\n    return new Uint8Array(buffer);\n  }\n  const binary = atob(encoded);\n  const bytes = new Uint8Array(binary.length);\n  for (let i = 0; i < binary.length; i++) {\n    bytes[i] = binary.charCodeAt(i);\n  }\n  return bytes;\n}\nexport {\n  text_encoder as a,\n  base64_encode as b,\n  base64_decode as c,\n  get_relative_path as g,\n  text_decoder as t\n};\n"],"mappings":"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"}