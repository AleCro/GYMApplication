import"../chunks/DsnmJJEf.js";import"../chunks/hNqiKWnM.js";import{o as ge}from"../chunks/1-JAo-Vw.js";import{p as me,d as x,t as Q,h as t,a as g,e as xe,j as s,s as o,m as p,i as a,r,z as be}from"../chunks/DFFLsmBn.js";import{e as m,s as u}from"../chunks/CVaLoUw_.js";import{i as R}from"../chunks/DIYmMOxU.js";import{e as he,i as ye}from"../chunks/wBDlzmEs.js";import{r as _e,s as V}from"../chunks/BPl-Gnor.js";import{b as X,a as we}from"../chunks/bS5b90uK.js";import{i as ke}from"../chunks/BUx8HaOQ.js";import{r as j,c as z}from"../chunks/D8H4y7nB.js";var Ee=x('<p class="text-xs text-gray-500 ml-1">Photo cannot be changed during edit</p>'),Pe=x('<button class="px-6 py-3 rounded-lg border border-white/10 hover:bg-white/10 transition text-gray-300">Cancel</button>'),De=x('<div class="glass-card rounded-2xl overflow-hidden flex flex-col hover:shadow-2xl hover:shadow-primary/10 transition duration-300 group border border-white/5 relative"><div class="aspect-[4/3] bg-black/40 relative overflow-hidden"><img class="w-full h-full object-cover transition duration-700 group-hover:scale-110"/> <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition duration-300 flex items-end p-6"><span class="text-white font-medium bg-primary/20 backdrop-blur-md px-3 py-1 rounded-full border border-primary/30 text-sm"> </span></div></div> <div class="p-6 flex-grow flex flex-col gap-2"><div class="flex justify-between items-start"><h3 class="text-2xl font-bold text-white group-hover:text-primary transition"> </h3></div> <p class="text-gray-400 text-sm leading-relaxed"> </p> <div class="mt-4 flex justify-end gap-3 pt-4 border-t border-white/5"><button class="text-sm font-medium text-primary hover:text-green-300 transition">Edit</button> <button class="text-sm font-medium text-accent hover:text-red-300 transition">Delete</button></div></div></div>'),Ie=x('<div class="space-y-8"><h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">Progress Tracker</h1> <div class="glass-card p-8 rounded-2xl"><h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2"><span class="text-primary"> </span> </h2> <div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-2"><label class="text-xs font-bold text-gray-400 uppercase tracking-wider ml-1">Title</label> <input placeholder="e.g., Week 1 Transformation" class="w-full glass-input px-4 py-3 rounded-lg focus:ring-2 focus:ring-primary transition"/></div> <div class="space-y-2"><label class="text-xs font-bold text-gray-400 uppercase tracking-wider ml-1">Photo</label> <input type="file" accept="image/*" id="fileInput" class="w-full glass-input px-4 py-2.5 rounded-lg focus:ring-2 focus:ring-primary transition file:mr-4 file:py-1 file:px-3 file:rounded-md file:border-0 file:text-xs file:font-semibold file:bg-primary file:text-black hover:file:bg-green-400 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"/> <!></div></div> <div class="space-y-2"><label class="text-xs font-bold text-gray-400 uppercase tracking-wider ml-1">Description</label> <textarea placeholder="How do you feel? Current weight? Personal records?" rows="3" class="w-full glass-input px-4 py-3 rounded-lg focus:ring-2 focus:ring-primary transition resize-none"></textarea></div> <div class="flex justify-end gap-3"><!> <button class="glass-button px-8 py-3 rounded-lg hover:shadow-lg hover:shadow-primary/20 transition transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none font-bold text-black"> </button></div></div></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div></div>');function Ge(Y,Z){me(Z,!1);let F=p([]),n=p(""),c=p(""),d=p(),l=p(null),v=p(!1);async function b(){try{o(F,await j("/progress","GET",null,{Authorization:`Bearer ${z.token}`}))}catch(e){console.error(e)}}async function ee(){if(!t(d)||t(d).length===0){alert("Please select an image");return}if(!t(n)){alert("Please enter a title");return}o(v,!0);const e=new FormData;e.append("title",t(n)),e.append("description",t(c)),e.append("image",t(d)[0]);try{await j("/progress","POST",e,{Authorization:`Bearer ${z.token}`}),o(n,""),o(c,""),o(d,null),document.getElementById("fileInput").value="",b()}catch(i){console.error(i),alert("Failed to upload")}o(v,!1)}async function te(e){o(l,e.id),o(n,e.title),o(c,e.description)}function re(){o(l,null),o(n,""),o(c,""),o(d,null),document.getElementById("fileInput")&&(document.getElementById("fileInput").value="")}async function ae(e){if(confirm("Are you sure you want to delete this entry?"))try{await j(`/progress/${e}`,"DELETE",null,{Authorization:`Bearer ${z.token}`}),b()}catch(i){console.error(i),alert(`Failed to delete: ${i.message||i}`)}}ge(()=>{b()}),ke();var h=Ie(),y=s(a(h),2),_=a(y),w=a(_),ie=a(w,!0);r(w);var se=s(w);r(_);var S=s(_,2),k=a(S),E=a(k),C=s(a(E),2);_e(C),r(E);var L=s(E,2),P=s(a(L),2),oe=s(P,2);{var le=e=>{var i=Ee();g(e,i)};R(oe,e=>{t(l)&&e(le)})}r(L),r(k);var D=s(k,2),q=s(a(D),2);be(q),r(D);var G=s(D,2),H=a(G);{var ne=e=>{var i=Pe();m("click",i,re),g(e,i)};R(H,e=>{t(l)&&e(ne)})}var f=s(H,2),de=a(f,!0);r(f),r(G),r(S),r(y);var M=s(y,2);he(M,5,()=>t(F),ye,(e,i)=>{var I=De(),A=a(I),B=a(A),N=s(B,2),O=a(N),ce=a(O,!0);r(O),r(N),r(A);var U=s(A,2),T=a(U),W=a(T),pe=a(W,!0);r(W),r(T);var $=s(T,2),ue=a($,!0);r($);var J=s($,2),K=a(J),ve=s(K,2);r(J),r(U),r(I),Q(fe=>{V(B,"src",t(i).imageData),V(B,"alt",t(i).title),u(ce,fe),u(pe,t(i).title),u(ue,t(i).description)},[()=>new Date(t(i).createdAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]),m("click",K,()=>te(t(i))),m("click",ve,()=>ae(t(i).id)),g(e,I)}),r(M),r(h),Q(()=>{u(ie,t(l)?"âœŽ":"+"),u(se,` ${t(l)?"Edit Entry":"Add New Entry"}`),P.disabled=!!t(l),f.disabled=t(v),u(de,t(v)?"Saving...":t(l)?"Update Entry":"Save Progress")}),X(C,()=>t(n),e=>o(n,e)),we(P,()=>t(d),e=>o(d,e)),X(q,()=>t(c),e=>o(c,e)),m("click",f,ee),g(Y,h),xe()}export{Ge as component};
