import"../chunks/DsnmJJEf.js";import"../chunks/hNqiKWnM.js";import{o as Bt}from"../chunks/1-JAo-Vw.js";import{p as Ct,l as B,b as It,d as w,f as Lt,t as C,a as b,e as Pt,h as t,m as v,i as a,j as s,s as i,r,u as c,y as Z,g as ct,z as Yt}from"../chunks/DFFLsmBn.js";import{e as _,s as y}from"../chunks/CVaLoUw_.js";import{i as ut}from"../chunks/DIYmMOxU.js";import{e as I,i as L}from"../chunks/wBDlzmEs.js";import{s as qt,r as Nt}from"../chunks/BPl-Gnor.js";import{s as pt}from"../chunks/CloNzBF7.js";import{b as ft}from"../chunks/bS5b90uK.js";import{s as gt}from"../chunks/BqlTOgs2.js";import{i as $t}from"../chunks/BUx8HaOQ.js";import{r as P,c as tt}from"../chunks/D8H4y7nB.js";var Gt=w('<div class="h-32 rounded-xl"></div>'),Jt=w('<div class="text-xs bg-primary/80 text-black font-semibold px-2 py-1 rounded shadow-sm truncate w-full block"> </div>'),Ut=w('<div><span> </span> <div class="mt-1 space-y-1 overflow-y-auto scrollbar-hide w-full flex-grow"></div></div>'),Wt=w('<div class="bg-white/5 p-3 rounded-lg flex justify-between items-center border border-white/5 hover:border-white/10 transition"><div><div class="font-bold text-white"> </div> <div class="text-xs text-gray-400"> </div></div> <div class="flex gap-2"><button class="text-primary hover:text-green-300 text-sm font-medium">Edit</button> <button class="text-accent hover:text-red-300 text-sm font-medium">Del</button></div></div>'),Ht=w('<div class="mb-6 space-y-3"><h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider">Events</h4> <!></div>'),Kt=w('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4"><div class="glass-card p-8 rounded-2xl shadow-2xl w-full max-w-md border border-white/10"><h3 class="text-2xl font-bold text-white mb-6 border-b border-white/10 pb-2"> </h3> <!> <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3"> </h4> <div class="space-y-4"><input placeholder="Event Title" class="w-full glass-input px-4 py-3 rounded-lg focus:ring-2 focus:ring-primary transition"/> <textarea placeholder="Description" rows="3" class="w-full glass-input px-4 py-3 rounded-lg focus:ring-2 focus:ring-primary transition resize-none"></textarea> <div class="flex justify-end gap-3 mt-6"><button class="px-4 py-2 text-gray-300 hover:text-white transition">Close</button> <button class="glass-button px-6 py-2 rounded-lg hover:shadow-lg hover:shadow-primary/20 transition transform hover:-translate-y-0.5">Save</button></div></div></div></div>'),Qt=w('<div class="space-y-8"><div class="flex items-center justify-between"><h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">Calendar</h1> <div class="flex items-center gap-4 glass p-2 rounded-lg"><button class="p-2 hover:bg-white/10 rounded-lg text-white transition">&lt;</button> <h2 class="text-xl font-semibold text-white w-40 text-center"> </h2> <button class="p-2 hover:bg-white/10 rounded-lg text-white transition">&gt;</button></div></div> <div class="grid grid-cols-7 gap-4 text-center text-gray-400 font-semibold mb-2"><div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div></div> <div class="grid grid-cols-7 gap-4"><!> <!></div></div> <!>',1);function de(ht,mt){Ct(mt,!1);const n=v(),l=v(),Y=v(),q=v(),et=v();let rt=[],g=v(new Date),p=v(null),N=v(!1),z=v(""),A=v(""),m=v(null);async function $(){try{rt=(await P("/events","GET",null,{Authorization:`Bearer ${tt.token}`})).map(o=>({...o,date:new Date(o.date)}))}catch(e){console.error(e)}}function xt(){i(g,new Date(t(n),t(l)-1,1))}function bt(){i(g,new Date(t(n),t(l)+1,1))}function _t(e){i(p,new Date(t(n),t(l),e)),i(z,""),i(A,""),i(m,null),i(N,!0)}function G(e){return rt.filter(o=>o.date.getDate()===e&&o.date.getMonth()===t(l)&&o.date.getFullYear()===t(n))}async function yt(){const e=JSON.stringify({title:t(z),description:t(A),date:t(p).toISOString()}),o={Authorization:`Bearer ${tt.token}`,"Content-Type":"application/json"};try{t(m)?await P(`/events/${t(m)}`,"PUT",e,o):await P("/events","POST",e,o),J(),$()}catch(h){console.error(h)}}async function wt(e){if(confirm("Delete this event?"))try{await P(`/events/${e}`,"DELETE",null,{Authorization:`Bearer ${tt.token}`}),$(),t(m)===e&&J()}catch(o){console.error(o)}}function Dt(e){i(z,e.title),i(A,e.description),i(m,e.id)}function J(){i(N,!1),i(p,null),i(m,null)}Bt($),B(()=>t(g),()=>{i(n,t(g).getFullYear())}),B(()=>t(g),()=>{i(l,t(g).getMonth())}),B(()=>(t(n),t(l)),()=>{i(Y,new Date(t(n),t(l)+1,0).getDate())}),B(()=>(t(n),t(l)),()=>{i(q,new Date(t(n),t(l),1).getDay())}),B(()=>t(g),()=>{i(et,t(g).toLocaleString("default",{month:"long"}))}),It(),$t();var at=Qt(),U=Lt(at),W=a(U),it=s(a(W),2),ot=a(it),H=s(ot,2),kt=a(H);r(H);var Et=s(H,2);r(it),r(W);var st=s(W,4),nt=a(st);I(nt,1,()=>(t(q),c(()=>Array(t(q)))),L,(e,o)=>{var h=Gt();b(e,h)});var Mt=s(nt,2);I(Mt,1,()=>(t(Y),c(()=>Array(t(Y)))),L,(e,o,h)=>{const u=Z(()=>h+1),K=Z(()=>(ct(t(u)),c(()=>G(t(u))))),D=Z(()=>(ct(t(u)),t(l),t(n),c(()=>t(u)===new Date().getDate()&&t(l)===new Date().getMonth()&&t(n)===new Date().getFullYear())));var x=Ut();let k;var E=a(x);let F;var O=a(E,!0);r(E);var M=s(E,2);I(M,5,()=>t(K),L,(T,f)=>{var S=Jt(),d=a(S,!0);r(S),C(()=>{qt(S,"title",(t(f),c(()=>t(f).title))),y(d,(t(f),c(()=>t(f).title)))}),b(T,S)}),r(M),r(x),C((T,f)=>{k=pt(x,1,"h-32 glass-card p-2 cursor-pointer transition relative overflow-hidden hover:border-primary/50 group flex flex-col",null,k,T),F=pt(E,1,"font-bold text-gray-300 group-hover:text-white transition",null,F,f),y(O,t(u))},[()=>({"border-primary":t(D),"bg-primary-10":t(D)}),()=>({"text-primary":t(D)})]),_("click",x,()=>_t(t(u))),b(e,x)}),r(st),r(U);var Tt=s(U,2);{var St=e=>{var o=Kt(),h=a(o),u=a(h),K=a(u,!0);r(u);var D=s(u,2);{var x=d=>{var Q=Ht(),jt=s(a(Q),2);I(jt,1,()=>(t(p),c(()=>G(t(p).getDate()))),L,(zt,j)=>{var R=Wt(),V=a(R),X=a(V),At=a(X,!0);r(X);var lt=s(X,2),Ft=a(lt,!0);r(lt),r(V);var dt=s(V,2),vt=a(dt),Ot=s(vt,2);r(dt),r(R),C(()=>{y(At,(t(j),c(()=>t(j).title))),y(Ft,(t(j),c(()=>t(j).description)))}),_("click",vt,gt(()=>Dt(t(j)))),_("click",Ot,gt(()=>wt(t(j).id))),b(zt,R)}),r(Q),b(d,Q)};ut(D,d=>{t(p),c(()=>G(t(p).getDate()).length>0)&&d(x)})}var k=s(D,2),E=a(k,!0);r(k);var F=s(k,2),O=a(F);Nt(O);var M=s(O,2);Yt(M);var T=s(M,2),f=a(T),S=s(f,2);r(T),r(F),r(h),r(o),C(d=>{y(K,d),y(E,t(m)?"Edit Event":"Add Event")},[()=>(t(p),c(()=>t(p)?.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})))]),ft(O,()=>t(z),d=>i(z,d)),ft(M,()=>t(A),d=>i(A,d)),_("click",f,J),_("click",S,yt),b(e,o)};ut(Tt,e=>{t(N)&&e(St)})}C(()=>y(kt,`${t(et)??""} ${t(n)??""}`)),_("click",ot,xt),_("click",Et,bt),b(ht,at),Pt()}export{de as component};
