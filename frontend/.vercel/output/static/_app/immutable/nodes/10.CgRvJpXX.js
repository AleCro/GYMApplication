import"../chunks/DsnmJJEf.js";import"../chunks/hNqiKWnM.js";import{a as ee}from"../chunks/1-JAo-Vw.js";import{p as re,s as i,m as g,l as kt,b as ae,d as _,f as st,t as R,h as t,a as u,e as se,g as $t,$ as oe,j as n,u as M,i as a,r as s,c as Ut,w as J}from"../chunks/DFFLsmBn.js";import{h as ie,e as C,s as y}from"../chunks/CVaLoUw_.js";import{i as h}from"../chunks/DIYmMOxU.js";import{e as ne}from"../chunks/wBDlzmEs.js";import{r as ot}from"../chunks/BPl-Gnor.js";import{s as H}from"../chunks/CloNzBF7.js";import{t as le,f as de}from"../chunks/iA-kc8Oh.js";import{b as it}from"../chunks/bS5b90uK.js";import{a as ce}from"../chunks/BqlTOgs2.js";import{i as ve}from"../chunks/BUx8HaOQ.js";import{p as ue}from"../chunks/NJrgjD4c.js";import{r as St,c as Mt}from"../chunks/D8H4y7nB.js";import{q as pe}from"../chunks/iVSWiVfi.js";import{u as Ct}from"../chunks/CITems8I.js";var me=_('<button class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white"><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),ge=_('<button class="px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600 rounded-lg transition">Clear</button>'),fe=_('<span class="ml-2">Searching...</span>'),xe=_('<p class="mt-2 text-sm text-gray-400"> <!></p>'),be=_('<div class="p-4 bg-red-900/30 text-red-300 rounded-lg border border-red-700 font-medium" role="alert"> </div>'),ye=_('<tr><td colspan="5" class="px-6 py-4 text-center text-gray-500 italic"><!></td></tr>'),he=_('<tr><td colspan="5" class="px-6 py-4 text-center text-gray-500 italic"><!></td></tr>'),_e=_('<tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-300"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-white font-medium"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="text-indigo-400 hover:text-indigo-300">Edit</button></td></tr>'),we=_('<span class="block text-xs text-gray-500 mt-1"> </span>'),ke=_('<div class="fixed inset-0 bg-black/70 z-[100] flex items-center justify-center p-4"><div class="bg-gray-800 p-8 rounded-xl shadow-2xl w-full max-w-md border border-gray-700"><h3 class="text-xl font-bold text-white mb-4"> </h3> <div class="space-y-4"><div><label for="edit-username" class="block text-sm font-medium text-gray-300">Username (String)</label> <input id="edit-username" type="text" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"/></div> <div><label for="edit-role" class="block text-sm font-medium text-gray-300">Role (Number 0-255)</label> <input id="edit-role" type="number" min="0" max="255" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"/> <p class="mt-1 text-xs text-gray-500"> </p></div></div> <div class="mt-6 flex justify-end gap-3"><button class="px-4 py-2 text-sm font-medium rounded-lg text-gray-300 bg-gray-700 hover:bg-gray-600 transition">Cancel</button> <button class="px-4 py-2 text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 transition">Save Changes</button></div></div></div>'),$e=_('<div class="space-y-6"><header class="pb-4 border-b border-gray-700"><h1 class="text-3xl font-bold text-white">ðŸ‘¤ User Management</h1> <p class="mt-1 text-gray-400"> </p></header> <div class="bg-gray-800 p-4 rounded-lg border border-gray-700"><div class="flex gap-4 items-center"><div class="flex-1 relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <input type="text" placeholder="Search by username or ID..." class="w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/> <!></div> <!></div> <!></div> <!> <div class="overflow-x-auto rounded-lg border border-gray-700 shadow-xl bg-gray-800"><table class="min-w-full divide-y divide-gray-700"><thead class="bg-gray-700/50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">ID</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Username</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Role</th><th scope="col" class="relative px-6 py-3"><span class="sr-only">Edit</span></th></tr></thead><tbody class="divide-y divide-gray-800"><!></tbody></table></div> <div class="flex justify-between items-center pt-4"><p class="text-sm text-gray-400"> <!></p> <div class="flex gap-2"><button>Previous</button> <button>Next</button></div></div></div> <!>',1);function Fe(Et,nt){re(nt,!1);const lt=g();let k=ue(nt,"data",8);Ct.set(k()?.user??null);let Nt=Ct.subscribe(e=>{i(lt,e)});ee(()=>{Nt()});let E=g(k().users||[]),x=g(k().total||0),w=g(k().limit||10),c=g(k().page||1),N=g(!1),D=g(null),m=g(""),K,L=g(!1),z=g(!1),$=g(null),P=g(""),q=g(0);const Tt={0:"User",255:"Administrator"},dt=e=>Tt[e]||`Custom (${e})`;async function A(e,r=""){i(N,!0),i(D,null),i(c,e);try{let o=`/users?limit=${t(w)}&page=${e}`;r.trim()&&(o+=`&search=${encodeURIComponent(r.trim())}`);const l=await St(o,"GET",null,{Authorization:`Bearer ${Mt.token}`});i(E,l.users||[]),i(x,l.total||0),i(w,l.limit||10),i(c,l.page||1)}catch(o){i(D,"Failed to load users: "+(o.message||"Network error")),console.error(o)}finally{i(N,!1),i(L,!1)}}function jt(){i(L,!0),K&&clearTimeout(K),K=setTimeout(()=>{A(1,t(m))},300)}function ct(){i(m,""),A(1)}function Rt(e){i($,e),i(P,e.username),i(q,e.group),i(z,!0)}async function It(){if(!t($))return;const e=`/users/${t($).id}`,r=JSON.stringify({username:t(P),group:parseInt(t(q),10)});try{let o=await St(e,"PUT",r,{Authorization:`Bearer ${Mt.token}`});i(E,t(E).map(l=>l.id===t($).id?o:l)),i(z,!1),i($,null)}catch(o){alert("Failed to update user: "+(o.message||"Check server logs.")),console.error("Update failed:",o)}}kt(()=>$t(k()),()=>{i(lt,k().user)}),kt(()=>(t(E),t(N),t(c)),()=>{t(E).length===0&&!t(N)&&A(t(c))}),ae(),ve();var vt=$e();ie(e=>{oe.title="User Management"});var Q=st(vt),V=a(Q),ut=n(a(V),2),zt=a(ut);s(ut),s(V);var W=n(V,2),X=a(W),Y=a(X),F=n(a(Y),2);ot(F);var At=n(F,2);{var Bt=e=>{var r=me();C("click",r,ct),u(e,r)};h(At,e=>{t(m)&&e(Bt)})}s(Y);var Dt=n(Y,2);{var Lt=e=>{var r=ge();C("click",r,ct),u(e,r)};h(Dt,e=>{t(m)&&e(Lt)})}s(X);var Pt=n(X,2);{var qt=e=>{var r=xe(),o=a(r),l=n(o);{var j=p=>{var d=fe();u(p,d)};h(l,p=>{t(L)&&p(j)})}s(r),R(()=>y(o,`Searching for: "${t(m)??""}" `)),u(e,r)};h(Pt,e=>{t(m)&&e(qt)})}s(W);var pt=n(W,2);{var Ft=e=>{var r=be(),o=a(r,!0);s(r),R(()=>y(o,t(D))),u(e,r)};h(pt,e=>{t(D)&&e(Ft)})}var Z=n(pt,2),mt=a(Z),gt=n(a(mt)),Ot=a(gt);{var Gt=e=>{var r=ye(),o=a(r),l=a(o);{var j=d=>{var b=J("Searching users...");u(d,b)},p=d=>{var b=J("Loading users...");u(d,b)};h(l,d=>{t(L)?d(j):d(p,!1)})}s(o),s(r),u(e,r)},Jt=e=>{var r=Ut(),o=st(r);{var l=p=>{var d=he(),b=a(d),T=a(b);{var v=U=>{var f=J();R(()=>y(f,`No users found matching "${t(m)??""}".`)),u(U,f)},B=U=>{var f=J("No users found.");u(U,f)};h(T,U=>{t(m)?U(v):U(B,!1)})}s(b),s(d),u(p,d)},j=p=>{var d=Ut(),b=st(d);ne(b,1,()=>t(E),T=>T.id,(T,v,B,U)=>{var f=_e(),I=a(f),G=a(I,!0);s(I);var S=n(I),Wt=a(S,!0);s(S);var rt=n(S),at=a(rt);let _t;var Xt=a(at,!0);s(at),s(rt);var wt=n(rt),Yt=a(wt);s(wt),s(f),R((Zt,te)=>{H(f,1,`transition duration-150 ${t(v),$t(k()),M(()=>t(v).id==k()?.user.userID?"bg-gray-700 hover:bg-gray-900":"hover:bg-gray-700")??""}`),y(G,(t(v),M(()=>t(v)?.id))),y(Wt,(t(v),M(()=>t(v).username))),_t=H(at,1,"px-2 inline-flex text-xs leading-5 font-semibold rounded-full",null,_t,Zt),y(Xt,te)},[()=>({"bg-indigo-600":t(v).group>=100,"bg-blue-600":t(v).group<100}),()=>(t(v),M(()=>dt(t(v).group)))]),C("click",Yt,()=>Rt(t(v))),u(T,f)}),u(p,d)};h(o,p=>{t(E),M(()=>t(E).length===0)?p(l):p(j,!1)},!0)}u(e,r)};h(Ot,e=>{t(N)?e(Gt):e(Jt,!1)})}s(gt),s(mt),s(Z);var ft=n(Z,2),tt=a(ft),xt=a(tt),Ht=n(xt);{var Kt=e=>{var r=we(),o=a(r);s(r),R(()=>y(o,`Filtered by: "${t(m)??""}"`)),u(e,r)};h(Ht,e=>{t(m)&&e(Kt)})}s(tt);var bt=n(tt,2),O=a(bt);let yt;var et=n(O,2);let ht;s(bt),s(ft),s(Q);var Qt=n(Q,2);{var Vt=e=>{var r=ke(),o=a(r),l=a(o),j=a(l);s(l);var p=n(l,2),d=a(p),b=n(a(d),2);ot(b),s(d);var T=n(d,2),v=n(a(T),2);ot(v);var B=n(v,2),U=a(B,!0);s(B),s(T),s(p);var f=n(p,2),I=a(f),G=n(I,2);s(f),s(o),s(r),R(S=>{y(j,`Edit User: ${t($),M(()=>t($).username)??""}`),y(U,S),G.disabled=t(N)},[()=>(t($),M(()=>dt(t($).group)))]),it(b,()=>t(P),S=>i(P,S)),it(v,()=>t(q),S=>i(q,S)),C("click",I,()=>i(z,!1)),C("click",G,It),le(3,r,()=>de,()=>({y:-10,duration:250,easing:pe})),C("click",r,ce(()=>i(z,!1))),u(e,r)};h(Qt,e=>{t(z)&&e(Vt)})}R((e,r,o,l)=>{y(zt,`Manage user accounts, roles, and details. Total Users: ${t(x)??""}`),y(xt,`Showing ${e??""} to ${r??""} of ${t(x)??""} results. `),O.disabled=t(c)===1||t(N),yt=H(O,1,"px-4 py-2 text-sm font-medium rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed",null,yt,o),et.disabled=t(c)*t(w)>=t(x)||t(N),ht=H(et,1,"px-4 py-2 text-sm font-medium rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed",null,ht,l)},[()=>(t(w),t(c),t(x),M(()=>Math.min(t(w)*(t(c)-1)+1,t(x)))),()=>(t(w),t(c),t(x),M(()=>Math.min(t(w)*t(c),t(x)))),()=>({"bg-gray-700":t(c)!==1,"hover:bg-gray-600":t(c)!==1,"text-white":t(c)!==1}),()=>({"bg-gray-700":t(c)*t(w)<t(x),"hover:bg-gray-600":t(c)*t(w)<t(x),"text-white":t(c)*t(w)<t(x)})]),it(F,()=>t(m),e=>i(m,e)),C("input",F,jt),C("click",O,()=>A(t(c)-1,t(m))),C("click",et,()=>A(t(c)+1,t(m))),u(Et,vt),se()}export{Fe as component};
