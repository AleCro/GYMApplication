import"../chunks/DsnmJJEf.js";import"../chunks/hNqiKWnM.js";import{o as Re,a as Ve}from"../chunks/1-JAo-Vw.js";import{p as Ee,s as H,l as we,b as He,d as j,t as M,a as d,e as Je,g as _,h as t,u as o,i as r,m as ye,n as $,$ as Ke,j as i,r as e,k as ke,c as J,f as C}from"../chunks/DFFLsmBn.js";import{h as Qe,e as w,s as v}from"../chunks/CVaLoUw_.js";import{i as A}from"../chunks/DIYmMOxU.js";import{e as K,i as Q}from"../chunks/wBDlzmEs.js";import{s as Xe}from"../chunks/CxnIUwRS.js";import{s as O}from"../chunks/BPl-Gnor.js";import{t as Ze,s as er}from"../chunks/iA-kc8Oh.js";import{i as rr}from"../chunks/BUx8HaOQ.js";import{r as tr}from"../chunks/Co19WjoH.js";import{p as ar}from"../chunks/NJrgjD4c.js";import{s as sr,a as ir}from"../chunks/BOruTPHP.js";/* empty css                */import{r as or}from"../chunks/BbNBUSHe.js";import{c as nr}from"../chunks/D8H4y7nB.js";import{u as X}from"../chunks/CITems8I.js";import{w as lr}from"../chunks/CdP2dVa8.js";import{q as cr}from"../chunks/iVSWiVfi.js";var Z=tr(()=>nr),dr=j('<meta charset="utf-8"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <meta name="description" content="AleGYM â€” Your Ultimate Fitness Companion"/> <link rel="icon" href="/favicon.ico"/>',1),vr=ke('<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>'),ur=ke('<svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16"></path></svg>'),pr=j('<li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition font-medium text-gray-300 hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"><span class="text-lg w-5 flex justify-center"> </span> </a></li>'),fr=j('<li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition font-medium text-gray-300 hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"><span class="text-lg w-5 flex justify-center"> </span> </a></li>'),mr=j('<li><a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10 transition font-medium text-gray-300 hover:text-primary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"><span class="text-xl w-5 flex justify-center"> </span> </a></li>'),gr=j('<div class="lg:hidden fixed inset-0 z-40 bg-black/70 transition-opacity duration-300 ease-in-out"></div> <aside id="mobile-sidebar" class="lg:hidden fixed left-0 top-0 bottom-0 z-50 w-72 p-6 glass shadow-2xl overflow-y-auto"><div class="flex items-center justify-between mb-8"><a href="/" class="flex items-center gap-3"><div class="w-9 h-9 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white font-bold">AG</div> <div class="text-base font-bold">AleGYM</div></a> <button aria-label="Close drawer" class="p-2 rounded-md hover:bg-white/10 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"><svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <nav class="space-y-6"><div class="space-y-1"><div class="text-xs uppercase tracking-wider text-gray-400 font-semibold mb-2">Workspace</div> <ul class="space-y-1 text-base"></ul></div> <div class="mt-10 pt-4 border-t border-white/10"><a href="/me" class="flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-white/10 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"><div class="w-8 h-8 rounded-full bg-secondary text-white flex items-center justify-center text-sm font-medium shrink-0"> </div> <div><div class="font-medium"> </div> <div class="text-xs text-gray-400">View profile</div></div></a> <button class="mt-4 inline-block w-full text-center px-3 py-2 rounded-lg bg-accent/20 text-accent text-sm font-medium hover:bg-accent/30 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent">Sign out</button></div></nav></aside>',1),br=j(`<div class="min-h-screen bg-background text-text font-sans flex flex-col bg-[url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')] bg-cover bg-center bg-fixed bg-no-repeat"><div class="absolute inset-0 bg-black/60 backdrop-blur-[2px] z-0"></div> <header class="glass sticky top-0 z-50 border-b-0"><div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-16"><div class="flex items-center gap-4"><button class="p-2 rounded-md hover:bg-white/10 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary lg:hidden" aria-label="Toggle sidebar"><!></button> <a href="/app" class="flex items-center gap-3 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-lg -m-1 p-1"><div class="w-9 h-9 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white font-bold shadow-md shrink-0">AG</div> <div class="hidden sm:block"><div class="font-bold text-lg tracking-wide">AleGYM</div></div></a></div> <div class="flex items-center gap-4"><div class="hidden md:flex items-center glass-input rounded-lg px-3 py-1.5 focus-within:ring-2 focus-within:ring-primary transition"><svg class="w-5 h-5 mr-2 text-gray-400" viewBox="0 0 24 24" fill="none" aria-hidden="" stroke="currentColor"><path stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M11 18a7 7 0 100-14 7 7 0 000 14z"></path></svg> <input placeholder="Search..." class="bg-transparent outline-none text-sm placeholder-gray-400 w-40 text-text"/></div> <a href="/app/me" class="flex items-center gap-2 p-1.5 rounded-full hover:bg-white/10 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"><div class="w-8 h-8 rounded-full bg-secondary text-white flex items-center justify-center text-sm font-medium shadow-md shrink-0"> </div> <span class="hidden lg:block text-sm font-medium text-text mr-1"> </span></a> <button class="hidden sm:block px-3 py-2 rounded-lg bg-accent/20 text-accent text-sm font-medium hover:bg-accent/30 transition shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent">Sign out</button></div></div></div></header> <div class="flex-grow flex max-w-screen-2xl mx-auto w-full min-w-0 z-10 relative"><aside class="hidden lg:block w-64 flex-shrink-0 glass border-y-0 border-l-0 border-r-0 pt-6 px-4 pb-4 sticky top-16 h-[calc(100vh-4rem)] overflow-hidden ml-4 my-4 rounded-xl"><nav class="space-y-6"><div class="space-y-1"><div class="text-xs uppercase tracking-wider text-gray-400 font-semibold mb-2">Workspace</div> <ul class="space-y-1 text-sm"></ul></div> <div class="space-y-1 pt-4 border-t border-white/10"><div class="text-xs uppercase tracking-wider text-gray-400 font-semibold mb-2">General</div> <ul class="space-y-1 text-sm"></ul></div></nav></aside> <!> <main class="flex-grow p-4 sm:p-6 lg:p-8 min-w-0"><div class="p-6 rounded-xl glass transition shadow-xl w-full max-w-full overflow-hidden"><!></div></main></div> <footer class="border-t border-white/10 glass mt-auto"><div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-4 text-sm text-gray-400"><div class="flex items-center justify-between"><div> </div> <div class="flex items-center gap-4"><a href="/privacy" class="hover:text-primary transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-sm">Privacy</a></div></div></div></footer></div>`);function qr(Me,z){Ee(z,!1);const ee=()=>ir(y,"$mobileOpen",je),[je,Ge]=sr(),f=ye(),I=ye();let n=ar(z,"data",12);X.set(n()?.user??null);let Ae=X.subscribe(s=>{H(f,s)}),G=null,y=lr(!1);Re(()=>{G!=null&&clearInterval(G),G=setInterval(()=>{t(f).exp*1e3-new Date().valueOf()<1e3*60*5&&or(Z().token).then(a=>{Z(Z().token=a),fetch("/app",{method:"POST",headers:{Authorization:a}}).then(l=>l.json()).then(l=>{X.set(l),n(n().user=l,!0)}).catch(l=>{console.error("Unable to renew user data",l)})}).catch(a=>{console.error("Unable to renew session",a)})},1e3*60)}),Ve(()=>{clearInterval(G),G=null,Ae()});let re=[{href:"/app",label:"Dashboard",icon:"ðŸ "},{href:"/app/notes",label:"Notes",icon:"ðŸ“"},{href:"/app/calendar",label:"Calendar",icon:"ðŸ“…"},{href:"/app/workouts",label:"Workouts",icon:"ðŸ’ª"},{href:"/app/progress",label:"Progress",icon:"ðŸ“ˆ"},{href:"/app/user-management",label:"User Management",icon:"ðŸ‘¤",group:255}],te=[{href:"/app/documentation",label:"Documentation",icon:"ðŸ“š"},{href:"/logout",label:"Sign out",icon:"ðŸšª"}];async function ae(){window.location.href="/logout"}we(()=>_(n()),()=>{H(f,n().user)}),we(()=>t(f),()=>{H(I,t(f)?t(f).username?t(f).username.charAt(0).toUpperCase():"G":"U")}),He(),rr();var Y=br();Qe(s=>{var a=dr();$(6),M(()=>Ke.title=(_(n()),o(()=>n()?.title??"AleGYM")??"")),d(s,a)});var D=i(r(Y),2),se=r(D),ie=r(se),U=r(ie),B=r(U),Se=r(B);{var $e=s=>{var a=vr();d(s,a)},Ce=s=>{var a=ur();d(s,a)};A(Se,s=>{ee()?s($e):s(Ce,!1)})}e(B),$(2),e(U);var oe=i(U,2),q=i(r(oe),2),N=r(q),Oe=r(N,!0);e(N);var P=i(N,2),ze=r(P,!0);e(P),e(q);var Ie=i(q,2);e(oe),e(ie),e(se),e(D);var W=i(D,2),F=r(W),ne=r(F),L=r(ne),le=i(r(L),2);K(le,5,()=>re,Q,(s,a)=>{var l=J(),x=C(l);{var h=m=>{var u=pr(),c=r(u),p=r(c),k=r(p,!0);e(p);var b=i(p);e(c),e(u),M(()=>{O(c,"href",(t(a),o(()=>t(a).href))),v(k,(t(a),o(()=>t(a).icon))),v(b,` ${t(a),o(()=>t(a).label)??""}`)}),d(m,u)};A(x,m=>{t(a),_(n()),o(()=>!t(a).group||t(a).group==n().user?.group)&&m(h)})}d(s,l)}),e(le),e(L);var ce=i(L,2),de=i(r(ce),2);K(de,5,()=>te,Q,(s,a)=>{var l=J(),x=C(l);{var h=m=>{var u=fr(),c=r(u),p=r(c),k=r(p,!0);e(p);var b=i(p);e(c),e(u),M(()=>{O(c,"href",(t(a),o(()=>t(a).href))),v(k,(t(a),o(()=>t(a).icon))),v(b,` ${t(a),o(()=>t(a).label)??""}`)}),d(m,u)};A(x,m=>{t(a),_(n()),o(()=>!t(a).group||t(a).group==n().user?.group)&&m(h)})}d(s,l)}),e(de),e(ce),e(ne),e(F);var ve=i(F,2);{var Ye=s=>{var a=gr(),l=C(a),x=i(l,2),h=r(x),m=i(r(h),2);e(h);var u=i(h,2),c=r(u),p=i(r(c),2);K(p,5,()=>o(()=>[...re,...te]),Q,(Pe,g)=>{var _e=J(),We=C(_e);{var Fe=R=>{var V=mr(),S=r(V),E=r(S),Le=r(E,!0);e(E);var Te=i(E);e(S),e(V),M(()=>{O(S,"href",(t(g),o(()=>t(g).href))),v(Le,(t(g),o(()=>t(g).icon))),v(Te,` ${t(g),o(()=>t(g).label)??""}`)}),w("click",S,()=>y.set(!1)),d(R,V)};A(We,R=>{t(g),_(n()),o(()=>!t(g).group||t(g).group==n().user?.group)&&R(Fe)})}d(Pe,_e)}),e(p),e(c);var k=i(c,2),b=r(k),T=r(b),Be=r(T,!0);e(T);var xe=i(T,2),he=r(xe),qe=r(he,!0);e(he),$(2),e(xe),e(b);var Ne=i(b,2);e(k),e(u),e(x),M(()=>{v(Be,t(I)),v(qe,(_(n()),o(()=>n()?.user?.username??"Guest")))}),w("click",l,()=>y.set(!1)),w("click",m,()=>y.set(!1)),w("click",b,()=>y.set(!1)),w("click",Ne,ae),Ze(3,x,()=>er,()=>({duration:250,easing:cr})),d(s,a)};A(ve,s=>{ee()&&s(Ye)})}var ue=i(ve,2),pe=r(ue),De=r(pe);Xe(De,z,"default",{}),e(pe),e(ue),e(W);var fe=i(W,2),me=r(fe),ge=r(me),be=r(ge),Ue=r(be);e(be),$(2),e(ge),e(me),e(fe),e(Y),M((s,a)=>{v(Oe,t(I)),O(P,"title",`Session expires: ${s??""}m`),v(ze,(_(n()),o(()=>n()?.user?.username??"Guest"))),v(Ue,`Â© ${a??""} AleGYM`)},[()=>(t(f),o(()=>t(f).exp-new Date().valueOf()/1e3)),()=>o(()=>new Date().getFullYear())]),w("click",B,()=>y.update(s=>!s)),w("click",Ie,ae),d(Me,Y),Je(),Ge()}export{qr as component};
