import"../chunks/DsnmJJEf.js";import"../chunks/hNqiKWnM.js";import{a as he}from"../chunks/1-JAo-Vw.js";import{p as ye,s as t,h as e,l as C,b as ke,d as f,t as y,a as v,e as Pe,g as Ce,$ as Me,j as i,m as n,i as o,r as a,u as p,w as Se}from"../chunks/DFFLsmBn.js";import{h as $e,e as qe,s as _}from"../chunks/CVaLoUw_.js";import{i as h}from"../chunks/DIYmMOxU.js";import{e as Ne,i as je}from"../chunks/wBDlzmEs.js";import{r as I,s as ee}from"../chunks/BPl-Gnor.js";import{t as M,s as S}from"../chunks/iA-kc8Oh.js";import{b as J}from"../chunks/bS5b90uK.js";import{p as Oe}from"../chunks/BqlTOgs2.js";import{i as Ae}from"../chunks/BUx8HaOQ.js";import{r as Be}from"../chunks/Co19WjoH.js";import{p as De}from"../chunks/NJrgjD4c.js";import{i as Ee}from"../chunks/BJmHV9VL.js";import{u as re}from"../chunks/CITems8I.js";import{r as Ue,c as ze}from"../chunks/CwswN3iS.js";var L=Be(()=>ze),Fe=f('<div class="text-sm text-gray-300 mt-1"> </div>'),Ge=f('<div class="p-4 text-sm text-green-200 bg-green-900/40 border border-green-700 rounded-md"> </div>'),Ie=f('<div class="p-4 text-sm text-red-200 bg-red-900/40 border border-red-700 rounded-md"> </div>'),Je=f('<li class="flex items-center"><svg class="w-4 h-4 mr-2 text-red-400 shrink-0" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M6 18L18 6M6 6l12 12"></path></svg> <span> </span></li>'),Le=f('<div class="p-4 bg-gray-900 border border-gray-700 rounded-md"><ul class="space-y-1 text-sm text-gray-400"></ul></div>'),Te=f('<p class="mt-2 text-sm text-red-400">Passwords do not match.</p>'),Ve=f("<span>Saving...</span>"),He=f('<div class="space-y-8 max-w-2xl mx-auto"><section><h1 class="text-2xl font-semibold text-white mb-6">My Profile</h1> <div class="flex items-center gap-6 p-6 bg-gray-800 rounded-lg"><div class="w-24 h-24 rounded-full bg-indigo-600 text-white flex items-center justify-center text-5xl font-medium shrink-0"> </div> <div><div class="text-xs text-gray-400 uppercase tracking-wider">Username</div> <div class="text-3xl font-bold text-gray-100"> </div> <!></div></div></section> <section><h2 class="text-xl font-semibold text-white mb-5">Change Password</h2> <form class="p-6 bg-gray-800 rounded-lg space-y-6"><!> <!> <div><label for="old-password" class="block text-sm font-medium text-gray-300 mb-2">Old Password</label> <input id="old-password" type="password" required class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md placeholder-gray-500 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/></div> <div><label for="new-password" class="block text-sm font-medium text-gray-300 mb-2">New Password</label> <input id="new-password" type="password" required class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md placeholder-gray-500 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/></div> <!> <div><label for="confirm-password" class="block text-sm font-medium text-gray-300 mb-2">Confirm New Password</label> <input id="confirm-password" type="password" required class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md placeholder-gray-500 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/> <!></div> <div class="pt-2"><button type="submit" class="w-full sm:w-auto px-6 py-2.5 bg-indigo-600 text-white font-semibold rounded-md shadow-md hover:bg-indigo-500 transition duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></form></section></div>');function cr(se,T){ye(T,!1);const l=n(),c=n(),g=n(),$=n();let q=De(T,"data",8);re.set(q()?.user??null);let te=re.subscribe(r=>{t(l,r)});const ae=(e(l).username??"G").charAt(0).toUpperCase();let w=n(""),d=n(""),u=n(""),b=n(!1),k=n(""),x=n("");async function oe(){if(!e($)){t(x,"Please correct the errors in the form.");return}t(b,!0),t(x,""),t(k,""),Ue("/user/change-password","POST",JSON.stringify({password:e(w),"new-password":e(d)}),{Authorization:`Bearer ${L().token}`}).then(r=>{t(b,!1),r?.session?(L(L().token=r?.session),t(k,"Changed password"),t(w,""),t(d,""),t(u,"")):r?.message?t(x,`Error resetting password: ${r?.message}`):t(x,"Error resetting password"),console.log(r)}).catch(r=>{t(b,!1),t(x,r.toString())})}he(()=>{te()}),C(()=>Ce(q()),()=>{t(l,q().user)}),C(()=>e(d),()=>{t(c,Ee(e(d)))}),C(()=>(e(d),e(u)),()=>{t(g,e(d).length>0&&e(d)===e(u))}),C(()=>(e(c),e(g),e(w),e(b)),()=>{t($,e(c).secure&&e(g)&&e(w).length>0&&!e(b))}),ke(),Ae();var N=He();$e(r=>{Me.title="My Profile"});var j=o(N),V=i(o(j),2),O=o(V),ie=o(O,!0);a(O);var H=i(O,2),A=i(o(H),2),de=o(A,!0);a(A);var ne=i(A,2);{var le=r=>{var s=Fe(),m=o(s,!0);a(s),y(()=>_(m,(e(l),p(()=>e(l).email)))),v(r,s)};h(ne,r=>{e(l),p(()=>e(l).email)&&r(le)})}a(H),a(V),a(j);var K=i(j,2),B=i(o(K),2),Q=o(B);{var ce=r=>{var s=Ge(),m=o(s,!0);a(s),y(()=>_(m,e(k))),M(3,s,()=>S),v(r,s)};h(Q,r=>{e(k)&&r(ce)})}var R=i(Q,2);{var ue=r=>{var s=Ie(),m=o(s,!0);a(s),y(()=>_(m,e(x))),M(3,s,()=>S),v(r,s)};h(R,r=>{e(x)&&r(ue)})}var D=i(R,2),W=i(o(D),2);I(W),a(D);var E=i(D,2),U=i(o(E),2);I(U),a(E);var X=i(E,2);{var ve=r=>{var s=Le(),m=o(s);Ne(m,5,()=>(e(c),p(()=>e(c).issues)),je,(xe,we)=>{var G=Je(),Z=i(o(G),2),_e=o(Z,!0);a(Z),a(G),y(()=>_(_e,e(we))),v(xe,G)}),a(m),a(s),M(3,s,()=>S),v(r,s)};h(X,r=>{e(d),e(c),p(()=>e(d).length>0&&!e(c).secure)&&r(ve)})}var z=i(X,2),P=i(o(z),2);I(P);var me=i(P,2);{var pe=r=>{var s=Te();M(3,s,()=>S),v(r,s)};h(me,r=>{e(u),e(g),p(()=>e(u).length>0&&!e(g))&&r(pe)})}a(z);var Y=i(z,2),F=o(Y),fe=o(F);{var ge=r=>{var s=Ve();v(r,s)},be=r=>{var s=Se("Change Password");v(r,s)};h(fe,r=>{e(b)?r(ge):r(be,!1)})}a(F),a(Y),a(B),a(K),a(N),y(()=>{_(ie,ae),_(de,(e(l),p(()=>e(l).username))),ee(U,"aria-invalid",(e(d),e(c),p(()=>e(d).length>0&&!e(c).secure))),ee(P,"aria-invalid",(e(u),e(g),p(()=>e(u).length>0&&!e(g)))),F.disabled=!e($)||e(b)}),J(W,()=>e(w),r=>t(w,r)),J(U,()=>e(d),r=>t(d,r)),J(P,()=>e(u),r=>t(u,r)),qe("submit",B,Oe(oe)),v(se,N),Pe()}export{cr as component};
